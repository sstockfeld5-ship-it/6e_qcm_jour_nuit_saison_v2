<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Terre & Soleil : Version Corrig√©e</title>
    <style>
        :root { 
            --primary: #2563eb; 
            --bg: #f1f5f9; 
            --text: #1e293b; 
            --easy: #16a34a; 
            --medium: #d97706; 
            --hard: #dc2626; 
        }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 10px; margin: 0; }
        .card { max-width: 600px; margin: 20px auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); margin-bottom: 20px; border-bottom: 3px solid #e2e8f0; padding-bottom: 15px; }
        .schema-box { background: #fff; border: 2px solid #e2e8f0; border-radius: 12px; margin: 15px 0; display: flex; justify-content: center; align-items: center; padding: 10px; min-height: 160px; }
        .progress-bar { height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden; margin-bottom: 15px; }
        .progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 0.3s; }
        .badge { display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 700; color: white; margin-bottom: 10px; }
        .lvl-easy { background-color: var(--easy); }
        .lvl-medium { background-color: var(--medium); }
        .lvl-hard { background-color: var(--hard); }
        .question-txt { font-weight: 700; font-size: 1.2rem; margin-bottom: 20px; }
        .options button { display: block; width: 100%; padding: 15px; margin: 10px 0; background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 12px; text-align: left; cursor: pointer; font-size: 1rem; transition: 0.2s; font-weight: 500; }
        .options button:hover { background: #e0f2fe; border-color: var(--primary); }
        .options button:disabled { cursor: default; opacity: 0.6; }
        .feedback { display: none; padding: 20px; border-radius: 12px; margin-top: 20px; font-weight: 600; border-left: 6px solid; }
        .correct { background: #dcfce7; color: #14532d; border-color: #22c55e; }
        .incorrect { background: #fee2e2; color: #7f1d1d; border-color: #ef4444; }
        .next-btn, .btn-restart { display: block; width: 100%; padding: 16px; margin-top: 20px; background: var(--primary); color: white; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; }
        .next-btn { display: none; }
        .btn-restart { background: #10b981; }
        svg { max-width: 100%; height: auto; }
    </style>
</head>
<body>

<div class="card">
    <h1>üåç Terre & Soleil : Le Quiz</h1>
    
    <div id="quiz-area">
        <div class="progress-bar"><div id="progress-fill" class="progress-fill"></div></div>
        <span id="lvl-badge" class="badge"></span>
        <div id="schema" class="schema-box"></div>
        <div id="q-text" class="question-txt"></div>
        <div id="options" class="options"></div>
        <div id="fb" class="feedback"></div>
        <button id="n-btn" class="next-btn" onclick="nextQuestion()">Question Suivante ‚ûî</button>
    </div>

    <div id="result-area" style="display:none; text-align:center;">
        <h2 style="font-size: 3rem;">üåü <span id="score-display"></span>/10</h2>
        <p id="comment" style="font-size: 1.2rem; color: #64748b; margin-bottom: 20px;"></p>
        <button class="btn-restart" onclick="location.reload()">üîÑ Nouveau tirage (Relancer)</button>
    </div>
</div>

<script>
/* --- BANQUE SVG --- */
const s = {
    rotation: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="100" cy="60" r="40" fill="#3b82f6"/><path d="M 70,40 Q 100,20 130,40" stroke="#000" fill="none" stroke-width="3" marker-end="url(#arrow)"/><text x="60" y="115" font-size="12" font-weight="bold">24 heures</text></svg>`,
    revolution: `<svg viewBox="0 0 200 120" width="200" height="120"><ellipse cx="100" cy="60" rx="80" ry="40" fill="none" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4"/><circle cx="100" cy="60" r="15" fill="#f59e0b"/><circle cx="30" cy="60" r="10" fill="#3b82f6"/><text x="80" y="115" font-size="12">365,25 jours</text></svg>`,
    ombre: `<svg viewBox="0 0 200 120" width="200" height="120"><rect x="20" y="100" width="160" height="2" fill="#000"/><line x1="100" y1="100" x2="100" y2="50" stroke="#000" stroke-width="4"/><path d="M 100,100 L 140,100" stroke="black" stroke-width="4" opacity="0.4"/><circle cx="60" cy="20" r="12" fill="#facc15"/><text x="110" y="115" font-size="10">Ombre port√©e</text></svg>`,
    saisons: `<svg viewBox="0 0 200 120" width="200" height="120"><path d="M10,60 L60,60 M10,70 L60,70 M10,50 L60,50" stroke="#f59e0b" stroke-width="3" /><text x="15" y="40" font-size="10" fill="#f59e0b">SOLEIL</text><g transform="translate(150,60) rotate(-23)"><circle r="35" fill="#3b82f6"/><line x1="0" y1="-45" x2="0" y2="45" stroke="#fff" stroke-width="2" stroke-dasharray="4"/><path d="M0,-35 A35,35 0 0,1 0,35" fill="#1e3a8a" opacity="0.4"/></g></svg>`,
    rayons: `<svg viewBox="0 0 200 100" width="200" height="100"><rect x="20" y="80" width="60" height="5" fill="#ef4444"/><path d="M30,20 L30,80 M50,20 L50,80 M70,20 L70,80" stroke="#f59e0b" stroke-width="2"/><text x="20" y="95" font-size="10" fill="#ef4444">√âT√â (Vertical)</text><rect x="120" y="80" width="60" height="5" fill="#3b82f6"/><path d="M140,20 L120,80 M160,20 L140,80 M180,20 L160,80" stroke="#f59e0b" stroke-width="2"/><text x="120" y="95" font-size="10" fill="#3b82f6">HIVER (Oblique)</text></svg>`,
    jourNuit: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="20" cy="60" r="30" fill="#facc15"/><g transform="translate(150,60)"><circle r="40" fill="#3b82f6"/><path d="M 0,-40 A 40,40 0 0,1 0,40 Z" fill="#1e3a8a"/><text x="-15" y="5" fill="white" font-size="10">Jour</text><text x="5" y="5" fill="white" font-size="10">Nuit</text></g></svg>`,
    jourNuitA: `<svg viewBox="0 0 200 120" width="200" height="120"><defs><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="white"/></marker></defs><circle cx="20" cy="60" r="30" fill="#facc15"/><g transform="translate(150,60)"><circle r="40" fill="#3b82f6"/><path d="M 0,-40 A 40,40 0 0,1 0,40 Z" fill="#1e3a8a"/><circle cx="0" cy="0" r="4" fill="red" stroke="white" stroke-width="1"/><text x="-5" y="-12" fill="red" font-weight="bold" font-size="12">A</text><path d="M -30,-50 Q 0,-60 30,-50" stroke="white" fill="none" stroke-width="2" marker-end="url(#arrowhead)"/><text x="-15" y="-65" fill="white" font-size="9">Rotation</text></g></svg>`,
    axe0: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="20" cy="60" r="25" fill="#f59e0b" opacity="0.6"/><g transform="translate(150,60)"><circle r="35" fill="#9ca3af"/><line x1="0" y1="-45" x2="0" y2="45" stroke="#000" stroke-width="3"/><text x="-35" y="-50" font-size="10" fill="#000">Axe 0¬∞ (Droit)</text></g></svg>`,
    courseSoleil: `<svg viewBox="0 0 200 120" width="200" height="120"><line x1="20" y1="110" x2="220" y2="110" stroke="#94a3b8" stroke-width="2"/><path d="M 40,110 Q 120,0 200,110" stroke="#f59e0b" fill="none" stroke-width="3" stroke-dasharray="5"/><text x="80" y="100" font-size="10">Est</text><text x="180" y="100" font-size="10">Ouest</text></svg>`,
    uranus: `<svg viewBox="0 0 200 120" width="200" height="120"><g transform="translate(100,60) rotate(98)"><circle r="40" fill="#a5f3fc" stroke="#0e7490"/><line x1="0" y1="-55" x2="0" y2="55" stroke="#000" stroke-width="2" stroke-dasharray="4"/><path d="M -50,0 A 50,10 0 0,1 50,0" fill="none" stroke="#000"/></g><text x="10" y="60" fill="#000" font-size="12">Axe couch√© !</text></svg>`,
    jupiter: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="100" cy="60" r="45" fill="#d97706"/><path d="M 60,60 L 140,60" stroke="#78350f" stroke-width="2"/><path d="M 90,30 Q 120,20 130,40" stroke="#fff" fill="none" stroke-width="2" marker-end="url(#arrow)"/><text x="65" y="15" font-size="12" fill="#000">1 tour en 10h !</text></svg>`
};

/* --- 2. BANQUE DE QUESTIONS (Format : correct = La bonne r√©ponse en texte) --- */
const bank = [
    // --- FACILE (Niveau 1) ---
    { l: 1, q: "Dur√©e de rotation de la Terre ?", svg: s.rotation, correct: "24 heures", bad: ["365 jours", "12 heures"], f: "C'est la dur√©e du jour." },
    { l: 1, q: "Dur√©e de r√©volution de la Terre ?", svg: s.revolution, correct: "365,25 jours", bad: ["24 heures", "1 semaine"], f: "C'est la dur√©e d'une ann√©e." },
    { l: 1, q: "Le Soleil se l√®ve √†...", svg: s.courseSoleil, correct: "L'Est", bad: ["L'Ouest", "Le Sud"], f: "Le Soleil se l√®ve toujours √† l'Est." },
    { l: 1, q: "Le Soleil se couche √†...", svg: s.courseSoleil, correct: "L'Ouest", bad: ["L'Est", "Le Nord"], f: "Il se couche toujours √† l'Ouest." },
    { l: 1, q: "L'alternance jour/nuit est due √†...", svg: s.jourNuit, correct: "La Rotation de la Terre", bad: ["La R√©volution", "La Lune"], f: "La Terre tourne sur elle-m√™me." },
    { l: 1, q: "La Terre tourne autour du Soleil sur...", svg: s.revolution, correct: "Son orbite", bad: ["Son axe", "L'√©quateur"], f: "L'orbite est son chemin." },
    { l: 1, q: "L'ombre d'un b√¢ton est la plus courte √†...", svg: s.ombre, correct: "Midi", bad: ["Matin", "Soir"], f: "Quand le Soleil est au plus haut." },
    { l: 1, q: "L'ombre sur le sol s'appelle...", svg: s.ombre, correct: "Ombre port√©e", bad: ["Ombre propre", "P√©nombre"], f: "Port√©e sur le sol." },
    { l: 1, q: "Mouvement autour du Soleil ?", svg: s.revolution, correct: "R√©volution", bad: ["Rotation", "Translation"], f: "R√©volution = Ann√©e." },
    { l: 1, q: "Mouvement sur soi-m√™me ?", svg: s.rotation, correct: "Rotation", bad: ["R√©volution", "Inclinaison"], f: "Rotation = Jour." },
    { l: 1, q: "La Terre est une...", svg: null, correct: "Plan√®te", bad: ["√âtoile", "Lune"], f: "C'est une plan√®te du syst√®me solaire." },
    { l: 1, q: "Le Soleil est une...", svg: null, correct: "√âtoile", bad: ["Plan√®te", "Com√®te"], f: "C'est une √©toile qui produit de la lumi√®re." },
    { l: 1, q: "Source de lumi√®re du syst√®me solaire ?", svg: null, correct: "Le Soleil", bad: ["La Terre", "La Lune"], f: "Seul le Soleil √©claire." },
    { l: 1, q: "Qui tourne autour de qui ?", svg: s.revolution, correct: "Terre tourne autour Soleil", bad: ["Soleil tourne autour Terre", "Immobile"], f: "La Terre tourne autour du Soleil." },
    { l: 1, q: "Pour avoir une ombre il faut...", svg: s.ombre, correct: "Lumi√®re + Objet opaque", bad: ["Juste lumi√®re", "Juste objet"], f: "Il faut bloquer la lumi√®re." },
    { l: 1, q: "La nuit, le Soleil est...", svg: s.jourNuit, correct: "Cach√© par la Terre", bad: ["√âteint", "Parti"], f: "On est de l'autre c√¥t√©." },
    { l: 1, q: "En √©t√© les jours sont...", svg: null, correct: "Plus longs", bad: ["Plus courts", "√âgaux"], f: "Le Soleil se couche tard." },
    { l: 1, q: "L'axe de la Terre passe par...", svg: s.rotation, correct: "Les p√¥les", bad: ["L'√©quateur", "Paris"], f: "P√¥le Nord et P√¥le Sud." },

    // --- MOYEN (Niveau 2) ---
    { l: 2, q: "Cause principale des saisons ?", svg: s.saisons, correct: "Inclinaison de l'axe", bad: ["Distance Terre-Soleil", "Vitesse de rotation"], f: "L'axe est pench√©, ce qui change l'ensoleillement." },
    { l: 2, q: "Pourquoi fait-il chaud en √©t√© ?", svg: s.rayons, correct: "Rayons verticaux (concentr√©s)", bad: ["Rayons obliques", "Terre plus proche"], f: "L'√©nergie est concentr√©e." },
    { l: 2, q: "Pourquoi fait-il froid en hiver ?", svg: s.rayons, correct: "Rayons obliques (√©tal√©s)", bad: ["Rayons verticaux", "Soleil moins fort"], f: "L'√©nergie est √©tal√©e." },
    { l: 2, q: "Si l'axe √©tait droit (0¬∞), les saisons...", svg: s.axe0, correct: "N'existeraient pas", bad: ["Seraient terribles", "Changeraient"], f: "Pas d'inclinaison = Pas de saison." },
    { l: 2, q: "Solstice d'√©t√© (21 juin) est le jour...", svg: null, correct: "Le plus long", bad: ["Le plus court", "Moyen"], f: "Le jour le plus long de l'ann√©e." },
    { l: 2, q: "√âquinoxe signifie...", svg: null, correct: "Jour = Nuit", bad: ["Jour long", "Nuit longue"], f: "12h de jour et 12h de nuit." },
    { l: 2, q: "Ann√©e bissextile (366j) sert √†...", svg: s.revolution, correct: "Rattraper 0,25 jour", bad: ["F√™ter No√´l", "Rien"], f: "On rattrape le quart de jour perdu chaque ann√©e." },
    { l: 2, q: "En hiver, la course du Soleil est...", svg: s.courseSoleil, correct: "Basse et courte", bad: ["Haute et longue", "Au z√©nith"], f: "Le Soleil reste bas." },
    { l: 2, q: "Ombre longue le matin car...", svg: s.ombre, correct: "Soleil bas", bad: ["Soleil haut", "Il fait froid"], f: "La lumi√®re est rasante." },
    { l: 2, q: "Saisons h√©misph√®re Sud ?", svg: null, correct: "Invers√©es", bad: ["Pareilles", "Al√©atoires"], f: "√ât√© au Nord = Hiver au Sud." },
    { l: 2, q: "La Terre tourne vers...", svg: null, correct: "L'Est", bad: ["L'Ouest", "Le Sud"], f: "Sens Ouest -> Est." },
    { l: 2, q: "Inclinaison de l'axe terrestre ?", svg: s.saisons, correct: "23¬∞", bad: ["0¬∞", "90¬∞"], f: "Environ 23 degr√©s." },
    { l: 2, q: "Date √âquinoxe Printemps ?", svg: null, correct: "21 mars", bad: ["21 juin", "21 sept"], f: "C'est en mars." },
    { l: 2, q: "√Ä midi solaire en √©t√©, le Soleil est...", svg: s.rayons, correct: "Presque au z√©nith", bad: ["Tr√®s bas", "Couch√©"], f: "Il est au plus haut." },
    { l: 2, q: "L'axe de la Terre pointe vers...", svg: null, correct: "L'√âtoile Polaire", bad: ["Le Soleil", "La Lune"], f: "L'√©toile du Nord." },
    { l: 2, q: "Sur le sch√©ma (A), le point va vers...", svg: s.jourNuitA, correct: "La nuit", bad: ["Le jour", "Le ciel"], f: "La fl√®che tourne vers l'ombre." },

    // --- DIFFICILE (Niveau 3 - Autres Plan√®tes & Analyse) ---
    { l: 3, q: "Mars a un axe inclin√© de 25¬∞ (comme la Terre). Donc Mars a...", svg: s.saisons, correct: "Des saisons", bad: ["Aucune saison", "Un √©t√© permanent"], f: "M√™me inclinaison = Saisons." },
    { l: 3, q: "Jupiter tourne en 10h. Sa journ√©e est...", svg: s.jupiter, correct: "Tr√®s courte", bad: ["Tr√®s longue", "Normale"], f: "Rotation rapide = Journ√©e courte." },
    { l: 3, q: "Uranus tourne 'couch√©e' (98¬∞). Cons√©quence ?", svg: s.uranus, correct: "Saisons extr√™mes", bad: ["Pas de saisons", "Saisons douces"], f: "40 ans de jour / 40 ans de nuit." },
    { l: 3, q: "Neptune est tr√®s loin. Son ann√©e est...", svg: s.revolution, correct: "Tr√®s longue (165 ans)", bad: ["Tr√®s courte", "Comme la Terre"], f: "Orbite g√©ante = Ann√©e longue." },
    { l: 3, q: "Qu'est-ce qui d√©termine la dur√©e d'une ANN√âE ?", svg: s.revolution, correct: "La R√©volution", bad: ["La Rotation", "La taille"], f: "Temps pour faire le tour de l'√©toile." },
    { l: 3, q: "Pourquoi le Soleil se l√®ve plus t√¥t √† Strasbourg qu'√† Brest ?", svg: null, correct: "Terre tourne vers l'Est", bad: ["Brest est au Nord", "Strasbourg est grand"], f: "L'Est voit le Soleil en premier." },
    { l: 3, q: "Pourquoi l'ombre √† midi est plus longue en Hiver ?", svg: s.rayons, correct: "Soleil plus bas", bad: ["Jour plus court", "Nuages"], f: "Le Soleil monte moins haut en hiver." },
    { l: 3, q: "Si la Terre tournait en 12h, le jour durerait...", svg: s.rotation, correct: "12h", bad: ["24h", "48h"], f: "La rotation d√©finit le jour." },
    { l: 3, q: "Si la Terre s'√©loignait du Soleil, l'ann√©e serait...", svg: s.revolution, correct: "Plus longue", bad: ["Plus courte", "Pareille"], f: "Orbite plus grande = Temps plus long." },
    { l: 3, q: "Au P√¥le Nord en √©t√©, le Soleil...", svg: s.saisons, correct: "Ne se couche jamais", bad: ["Ne se l√®ve jamais", "Est au z√©nith"], f: "C'est le jour polaire." }
];

/* --- LOGIQUE DE JEU --- */
let currentSeries = [];
let score = 0;
let currentIdx = 0;

// VRAI M√âLANGE AL√âATOIRE (Fisher-Yates)
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

function initGame() {
    // S√©lection par niveau
    const easy = shuffle(bank.filter(q => q.l === 1));
    const medium = shuffle(bank.filter(q => q.l === 2));
    const hard = shuffle(bank.filter(q => q.l === 3));

    // Piocher : 4 Faciles + 4 Moyennes + 2 Difficiles = 10 Questions
    currentSeries = [
        ...easy.slice(0, 4),
        ...medium.slice(0, 4),
        ...hard.slice(0, 2)
    ];
    
    // Rem√©langer le tout pour ne pas avoir l'ordre par difficult√©
    shuffle(currentSeries);

    score = 0;
    currentIdx = 0;
    document.getElementById('result-area').style.display = 'none';
    document.getElementById('quiz-area').style.display = 'block';
    render();
}

function render() {
    const q = currentSeries[currentIdx];
    
    // Progression
    document.getElementById('progress-fill').style.width = ((currentIdx) * 10) + "%";

    // Badge Niveau
    const badge = document.getElementById('lvl-badge');
    if(q.l === 1) { badge.innerText = "üü¢ Facile"; badge.className = "badge lvl-easy"; }
    else if(q.l === 2) { badge.innerText = "üü† Moyen"; badge.className = "badge lvl-medium"; }
    else { badge.innerText = "üî¥ Difficile"; badge.className = "badge lvl-hard"; }

    // Image
    const sBox = document.getElementById('schema');
    if(q.svg) { sBox.innerHTML = q.svg; sBox.style.display = 'flex'; }
    else { sBox.style.display = 'none'; }

    // Texte
    document.getElementById('q-text').innerText = `Question ${currentIdx + 1}/10 : ${q.q}`;

    // Options (M√©lange des r√©ponses ici !)
    const optBox = document.getElementById('options');
    optBox.innerHTML = "";
    
    // Cr√©er un tableau avec toutes les r√©ponses (la bonne + les mauvaises)
    let answers = [q.correct, ...q.bad];
    shuffle(answers); // M√©lange les boutons pour que la bonne r√©ponse ne soit pas toujours au m√™me endroit

    answers.forEach(ans => {
        const btn = document.createElement('button');
        btn.innerText = ans;
        btn.onclick = () => check(ans, q.correct, q.f);
        optBox.appendChild(btn);
    });

    document.getElementById('fb').style.display = 'none';
    document.getElementById('n-btn').style.display = 'none';
}

function check(userAns, correctAns, explanation) {
    const fb = document.getElementById('fb');
    const btns = document.querySelectorAll('.options button');
    
    btns.forEach(b => b.disabled = true);

    // Comparaison de TEXTE (Impossible de se tromper d'index)
    if (userAns === correctAns) {
        score++;
        fb.innerHTML = "‚úÖ <b>Bravo !</b><br>" + explanation;
        fb.className = "feedback correct";
    } else {
        fb.innerHTML = "‚ùå <b>Faux...</b><br>La bonne r√©ponse √©tait : <b>" + correctAns + "</b>.<br><i>" + explanation + "</i>";
        fb.className = "feedback incorrect";
    }
    fb.style.display = 'block';
    document.getElementById('n-btn').style.display = 'block';
}

function nextQuestion() {
    currentIdx++;
    if (currentIdx < 10) render();
    else end();
}

function end() {
    document.getElementById('quiz-area').style.display = 'none';
    document.getElementById('result-area').style.display = 'block';
    document.getElementById('score-display').innerText = score;
    
    let msg = "";
    if(score === 10) msg = "Parfait ! Tu es un expert ! üåü";
    else if(score >= 8) msg = "Excellent travail ! üöÄ";
    else if(score >= 5) msg = "Bien jou√© ! üåç";
    else msg = "Courage, revois tes le√ßons ! üåë";
    document.getElementById('comment').innerText = msg;
}

initGame();
</script>
</body>
</html>
