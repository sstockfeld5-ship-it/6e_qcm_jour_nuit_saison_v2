<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Terre & Soleil : Le D√©fi Corrig√©</title>
    <style>
        :root { 
            --primary: #2563eb; 
            --bg: #f8fafc; 
            --text: #1e293b; 
            --easy: #16a34a; 
            --medium: #d97706; 
            --hard: #dc2626; 
        }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background: var(--bg); color: var(--text); padding: 10px; margin: 0; }
        .card { max-width: 600px; margin: 10px auto; background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: var(--primary); font-size: 1.6rem; margin-bottom: 20px; border-bottom: 3px solid #e2e8f0; padding-bottom: 15px; }
        .schema-box { background-color: #ffffff; border: 2px solid #e2e8f0; border-radius: 12px; margin: 15px 0; display: flex; justify-content: center; align-items: center; padding: 10px; min-height: 160px; box-shadow: inset 0 0 10px rgba(0,0,0,0.03); }
        .progress-container { display: flex; gap: 5px; margin-bottom: 15px; }
        .progress-step { height: 8px; flex: 1; background: #e2e8f0; border-radius: 4px; transition: 0.3s; }
        .progress-step.active { background: var(--primary); }
        .badge { display: inline-block; padding: 5px 12px; border-radius: 20px; font-size: 0.85rem; font-weight: 700; color: white; margin-bottom: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .lvl-easy { background-color: var(--easy); }
        .lvl-medium { background-color: var(--medium); }
        .lvl-hard { background-color: var(--hard); }
        .question-txt { font-weight: 700; font-size: 1.15rem; line-height: 1.4; margin-bottom: 20px; color: #0f172a; }
        .options button { display: block; width: 100%; padding: 16px; margin: 10px 0; background: #f8fafc; border: 2px solid #cbd5e1; border-radius: 12px; text-align: left; cursor: pointer; font-size: 1rem; transition: 0.2s; color: #334155; font-weight: 500; }
        .options button:hover { background: #e0f2fe; border-color: var(--primary); transform: translateX(5px); }
        .options button:disabled { cursor: default; opacity: 0.6; transform: none; }
        .feedback { display: none; padding: 20px; border-radius: 12px; margin-top: 20px; font-weight: 600; font-size: 0.95rem; border-left: 6px solid; line-height: 1.5; }
        .correct { background: #dcfce7; color: #14532d; border-color: #22c55e; }
        .incorrect { background: #fee2e2; color: #7f1d1d; border-color: #ef4444; }
        .next-btn { display: none; width: 100%; padding: 16px; margin-top: 20px; background: var(--primary); color: white; border: none; border-radius: 12px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.2s; }
        .next-btn:hover { background: #1d4ed8; }
        .btn-restart { width: 100%; padding: 16px; background: #10b981; color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1.1rem; margin-top: 20px; }
        .btn-restart:hover { background: #059669; }
        svg { max-width: 100%; height: auto; display: block; }
    </style>
</head>
<body>

<div class="card">
    <h1>‚òÄÔ∏è Terre & Soleil : Le Quiz</h1>
    
    <div id="quiz-area">
        <div class="progress-container" id="progress-bar"></div>
        <span id="lvl-badge" class="badge"></span>
        <div id="schema" class="schema-box"></div>
        <div id="q-text" class="question-txt">Chargement...</div>
        <div id="options" class="options"></div>
        <div id="fb" class="feedback"></div>
        <button id="n-btn" class="next-btn" onclick="nextQuestion()">Question suivante ‚ûî</button>
    </div>

    <div id="result-area" style="display:none; text-align:center;">
        <h2 style="font-size: 3rem; margin: 10px 0;">üåü <span id="score-display"></span>/10</h2>
        <p id="comment" style="font-size: 1.3rem; color: #475569; margin-bottom: 30px; font-weight: 500;"></p>
        <div style="text-align:left; background:#f1f5f9; padding:20px; border-radius:15px; font-size:0.95rem; margin-bottom:20px; border: 1px solid #e2e8f0;">
            <strong>üéØ Composition du test :</strong><br><br>
            üü¢ 3 questions Faciles (Bases)<br>
            üü† 4 questions Moyennes (Compr√©hension)<br>
            üî¥ 3 questions Difficiles (Analyse)
        </div>
        <button class="btn-restart" onclick="initGame()">üîÑ Nouveau test</button>
    </div>
</div>

<script>
/* --- BANQUE SVG --- */
const s = {
    rotation: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="100" cy="60" r="40" fill="#3b82f6"/><path d="M 70,40 Q 100,20 130,40" stroke="#000" fill="none" stroke-width="3" marker-end="url(#arrow)"/><text x="60" y="115" font-size="12" font-weight="bold">24 heures</text></svg>`,
    revolution: `<svg viewBox="0 0 200 120" width="200" height="120"><ellipse cx="100" cy="60" rx="80" ry="40" fill="none" stroke="#f59e0b" stroke-width="2" stroke-dasharray="4"/><circle cx="100" cy="60" r="15" fill="#f59e0b"/><circle cx="30" cy="60" r="10" fill="#3b82f6"/><text x="80" y="115" font-size="12">365,25 jours</text></svg>`,
    ombre: `<svg viewBox="0 0 200 120" width="200" height="120"><rect x="20" y="100" width="160" height="2" fill="#000"/><line x1="100" y1="100" x2="100" y2="50" stroke="#000" stroke-width="4"/><path d="M 100,100 L 140,100" stroke="black" stroke-width="4" opacity="0.4"/><circle cx="60" cy="20" r="12" fill="#facc15"/><text x="110" y="115" font-size="10">Ombre port√©e</text></svg>`,
    saisons: `<svg viewBox="0 0 200 120" width="200" height="120"><path d="M10,60 L60,60 M10,70 L60,70 M10,50 L60,50" stroke="#f59e0b" stroke-width="3" /><text x="15" y="40" font-size="10" fill="#f59e0b">SOLEIL</text><g transform="translate(150,60) rotate(-23)"><circle r="35" fill="#3b82f6"/><line x1="0" y1="-45" x2="0" y2="45" stroke="#fff" stroke-width="2" stroke-dasharray="4"/><path d="M0,-35 A35,35 0 0,1 0,35" fill="#1e3a8a" opacity="0.4"/></g></svg>`,
    rayons: `<svg viewBox="0 0 200 100" width="200" height="100"><rect x="20" y="80" width="60" height="5" fill="#ef4444"/><path d="M30,20 L30,80 M50,20 L50,80 M70,20 L70,80" stroke="#f59e0b" stroke-width="2"/><text x="20" y="95" font-size="10" fill="#ef4444">√âT√â (Vertical)</text><rect x="120" y="80" width="60" height="5" fill="#3b82f6"/><path d="M140,20 L120,80 M160,20 L140,80 M180,20 L160,80" stroke="#f59e0b" stroke-width="2"/><text x="120" y="95" font-size="10" fill="#3b82f6">HIVER (Oblique)</text></svg>`,
    jourNuitA: `<svg viewBox="0 0 200 120" width="200" height="120"><defs><marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="white"/></marker></defs><circle cx="20" cy="60" r="30" fill="#facc15"/><g transform="translate(150,60)"><circle r="40" fill="#3b82f6"/><path d="M 0,-40 A 40,40 0 0,1 0,40 Z" fill="#1e3a8a"/><circle cx="0" cy="0" r="4" fill="red" stroke="white" stroke-width="1"/><text x="-5" y="-12" fill="red" font-weight="bold" font-size="12">A</text><path d="M -30,-50 Q 0,-60 30,-50" stroke="white" fill="none" stroke-width="2" marker-end="url(#arrowhead)"/><text x="-15" y="-65" fill="white" font-size="9">Rotation</text></g></svg>`,
    jourNuit: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="20" cy="60" r="30" fill="#facc15"/><g transform="translate(150,60)"><circle r="40" fill="#3b82f6"/><path d="M 0,-40 A 40,40 0 0,1 0,40 Z" fill="#1e3a8a"/><text x="-15" y="5" fill="white" font-size="10">Jour</text><text x="5" y="5" fill="white" font-size="10">Nuit</text></g></svg>`,
    axe0: `<svg viewBox="0 0 200 120" width="200" height="120"><circle cx="20" cy="60" r="25" fill="#f59e0b" opacity="0.6"/><g transform="translate(150,60)"><circle r="35" fill="#9ca3af"/><line x1="0" y1="-45" x2="0" y2="45" stroke="#000" stroke-width="3"/><text x="-35" y="-50" font-size="10" fill="#000">Axe 0¬∞ (Droit)</text></g></svg>`,
    courseSoleil: `<svg viewBox="0 0 200 120" width="200" height="120"><line x1="20" y1="110" x2="220" y2="110" stroke="#94a3b8" stroke-width="2"/><path d="M 40,110 Q 120,0 200,110" stroke="#f59e0b" fill="none" stroke-width="3" stroke-dasharray="5"/><text x="80" y="100" font-size="10">Est</text><text x="180" y="100" font-size="10">Ouest</text></svg>`
};

/* --- QUESTIONS CORRIG√âES (R√âPONSES M√âLANG√âES) --- */
const allQuestions = [
    { l: 1, q: "En combien de temps la Terre fait-elle un tour sur elle-m√™me ?", svg: s.rotation, o: ["365 jours", "24 heures", "12 heures"], c: 1, f: "C'est la dur√©e d'une rotation compl√®te (une journ√©e)." },
    { l: 1, q: "Combien de temps dure la r√©volution de la Terre autour du Soleil ?", svg: s.revolution, o: ["24 heures", "365,25 jours", "1 mois"], c: 1, f: "C'est la dur√©e d'une ann√©e terrestre." },
    { l: 1, q: "Le Soleil se l√®ve toujours vers...", svg: s.courseSoleil, o: ["L'Ouest", "L'Est", "Le Sud"], c: 1, f: "Le mouvement apparent commence √† l'Est." },
    { l: 2, q: "Quelle est la cause principale des saisons ?", svg: s.saisons, o: ["Distance Terre-Soleil", "Inclinaison de l'axe", "Vitesse de rotation"], c: 1, f: "L'axe pench√© fait varier l'ensoleillement selon la position sur l'orbite." },
    { l: 2, q: "En √©t√©, il fait plus chaud car les rayons sont...", svg: s.rayons, o: ["Obliques (√©tal√©s)", "Horizontaux", "Verticaux (concentr√©s)"], c: 2, f: "L'√©nergie est concentr√©e sur une plus petite surface." },
    { l: 3, q: "Sur le sch√©ma (Point A rouge), ce point passe de la lumi√®re √† l'ombre. C'est...", svg: s.jourNuitA, o: ["Le lever du Soleil", "Le coucher du Soleil", "Midi"], c: 1, f: "Le point bascule dans la partie nuit." },
    { l: 3, q: "Pourquoi le Soleil se l√®ve-t-il plus t√¥t √† Strasbourg qu'√† Brest ?", svg: null, o: ["Car il fait plus beau", "Car la Terre tourne vers l'Est", "Car Brest est au Nord"], c: 1, f: "Strasbourg est √† l'Est, donc face au Soleil en premier." }
];

let currentSeries = [];
let score = 0;
let currentIndex = 0;

function initGame() {
    const easy = allQuestions.filter(q => q.l === 1);
    const medium = allQuestions.filter(q => q.l === 2);
    const hard = allQuestions.filter(q => q.l === 3);
    const shuffle = (arr) => arr.sort(() => 0.5 - Math.random());
    
    currentSeries = [...shuffle(easy).slice(0, 3), ...shuffle(medium).slice(0, 4), ...shuffle(hard).slice(0, 3)];
    currentSeries = shuffle(currentSeries);
    score = 0; currentIndex = 0;
    document.getElementById('result-area').style.display = 'none';
    document.getElementById('quiz-area').style.display = 'block';
    
    const progContainer = document.getElementById('progress-bar');
    progContainer.innerHTML = '';
    for(let i=0; i<10; i++) {
        let div = document.createElement('div');
        div.className = 'progress-step';
        progContainer.appendChild(div);
    }
    showQuestion();
}

function showQuestion() {
    const q = currentSeries[currentIndex];
    document.querySelectorAll('.progress-step').forEach((el, idx) => {
        el.className = idx <= currentIndex ? 'progress-step active' : 'progress-step';
    });
    const badge = document.getElementById('lvl-badge');
    badge.innerText = q.l === 1 ? "üü¢ Niveau : Facile" : q.l === 2 ? "üü† Niveau : Moyen" : "üî¥ Niveau : Difficile";
    badge.className = "badge " + (q.l === 1 ? "lvl-easy" : q.l === 2 ? "lvl-medium" : "lvl-hard");
    const sBox = document.getElementById('schema');
    sBox.innerHTML = q.svg || "";
    sBox.style.display = q.svg ? 'flex' : 'none';
    document.getElementById('q-text').innerText = q.q;
    const optBox = document.getElementById('options');
    optBox.innerHTML = "";
    q.o.forEach((optText, index) => {
        const btn = document.createElement('button');
        btn.innerText = optText;
        btn.onclick = () => checkAnswer(index);
        optBox.appendChild(btn);
    });
    document.getElementById('fb').style.display = 'none';
    document.getElementById('n-btn').style.display = 'none';
}

function checkAnswer(selectedIndex) {
    const q = currentSeries[currentIndex];
    const fb = document.getElementById('fb');
    document.querySelectorAll('#options button').forEach(b => b.disabled = true);
    if (selectedIndex === q.c) {
        score++;
        fb.innerHTML = "‚úÖ <b>Exact !</b><br>" + q.f;
        fb.className = "feedback correct";
    } else {
        fb.innerHTML = "‚ùå <b>Faux.</b> La bonne r√©ponse √©tait : <i>" + q.o[q.c] + "</i>.<br>" + q.f;
        fb.className = "feedback incorrect";
    }
    fb.style.display = 'block';
    document.getElementById('n-btn').style.display = 'block';
}

function nextQuestion() {
    currentIndex++;
    if (currentIndex < currentSeries.length) showQuestion();
    else showResult();
}

function showResult() {
    document.getElementById('quiz-area').style.display = 'none';
    document.getElementById('result-area').style.display = 'block';
    document.getElementById('score-display').innerText = score;
    document.getElementById('comment').innerText = score >= 5 ? "Bien jou√© !" : "R√©vise tes le√ßons !";
}

initGame();
</script>
</body>
</html>
